<html>
<head>
<script type="text/javascript">
function print(x) {
	  var orig = document.getElementById("main").innerHTML;
	  document.getElementById("main").innerHTML = orig + x + "<br />";
	}

	function clear() {
	  document.getElementById("main").innerHTML = "";
	}

	function setInitInput() {
	  document.getElementById("puzzleinput").value = initInput;
	  if (isPart2) {
	    document.getElementById("part2").checked = true;
	  } else {
	    document.getElementById("part1").checked = true;
	  }
	}

	function setPart(x) {
	  isPart2 = x.value == 2;
	}
	// Input/Output
	var initInput = "LLRRLLRLDDUURLLRDUUUDULUDLUULDRDDDULLLRDDLLLRRDDRRUDDURDURLRDDULRRRLLULLULLRUULDLDDDUUURRRRURURDUDLLRRLDLLRRDRDLLLDDRRLUDDLDDLRDRDRDDRUDDRUUURLDUDRRLULLLDRDRRDLLRRLDLDRRRRLURLLURLRDLLRUDDRLRDRRURLDULURDLUUDURLDRURDRDLULLLLDUDRLLURRLRURUURDRRRULLRULLDRRDDDULDURDRDDRDUDUDRURRRRUUURRDUUDUDDDLRRUUDDUUDDDUDLDRDLRDUULLRUUDRRRDURLDDDLDLUULUDLLRDUDDDDLDURRRDRLLRUUUUDRLULLUUDRLLRDLURLURUDURULUDULUDURUDDULDLDLRRUUDRDDDRLLRRRRLDRRRD\nDRRRDULLRURUDRLRDLRULRRLRLDLUDLUURUUURURULRLRUDRURRRLLUDRLLDUDULLUUDLLUUUDDRLRUDDDDLDDUUDULDRRRDULUULDULDRUUULRUDDDUDRRLRLUDDURLLDRLUDUDURUUDRLUURRLUUUDUURUDURLUUUDRDRRRDRDRULLUURURDLUULLDUULUUDULLLDURLUDRURULDLDLRDRLRLUURDDRLDDLRRURUDLUDDDLDRLULLDRLLLURULLUURLUDDURRDDLDDDDRDUUULURDLUUULRRLRDLDRDDDRLLRUDULRRRUDRRLDRRUULUDDLLDUDDRLRRDLDDULLLRDURRURLLULURRLUULULRDLULLUUULRRRLRUDLRUUDDRLLLLLLLURLDRRUURLDULDLDDRLLLRDLLLDLRUUDRURDRDLUULDDRLLRRURRDULLULURRDULRUDUDRLUUDDDDUULDDDUUDURLRUDDULDDDDRUULUUDLUDDRDRD\nRRRULLRULDRDLDUDRRDULLRLUUDLULLRUULULURDDDLLLULRURLLURUDLRDLURRRLRLDLLRRURUDLDLRULDDULLLUUDLDULLDRDLRUULDRLURRRRUDDLUDLDDRUDDUULLRLUUDLUDUDRLRUULURUDULDLUUDDRLLUUURRURUDDRURDLDRRDRULRRRRUUUDRDLUUDDDUDRLRLDRRRRUDDRLLRDRLUDRURDULUUURUULLRDUUULRULRULLRULRLUDUDDULURDDLLURRRULDRULDUUDDULDULDRLRUULDRDLDUDRDUDLURLLURRDLLDULLDRULDLLRDULLRURRDULUDLULRRUDDULRLDLDLLLDUDLURURRLUDRRURLDDURULDURRDUDUURURULLLUDDLDURURRURDDDRRDRURRUURRLDDLRRLDDULRLLLDDUDRULUULLULUULDRLURRRLRRRLDRRLULRLRLURDUULDDUDLLLUURRRLDLUDRLLLRRUU\nURLDDDLDRDDDURRRLURRRRLULURLDDUDRDUDDLURURLLRDURDDRLRUURLDLLRDLRUUURLRLDLDRUDDDULLDULLDUULURLDRDUDRRLRRLULRDDULUDULDULLULDLRRLRRLLULRULDLLDULRRLDURRRRDLURDLUDUUUDLURRRRRUDDUDUUDULDLURRDRLRLUDUDUUDULDDURUDDRDRUDLRRUDRULDULRDRLDRUDRLLRUUDDRLURURDRRLRURULLDUUDRDLULRUULUDURRULLRLUUUUUDULRLUUDRDUUULLULUDUDDLLRRLDURRDDDLUDLUUDULUUULDLLLLUUDURRUDUDLULDRRRULLLURDURDDLRRULURUDURULRDRULLRURURRUDUULRULUUDDUDDUURLRLURRRRDLULRRLDRRDURUDURULULLRUURLLDRDRURLLLUUURUUDDDLDURRLLUUUUURLLDUDLRURUUUDLRLRRLRLDURURRURLULDLRDLUDDULLDUDLULLUUUDLRLDUURRR\nRLLDRDURRUDULLURLRLLURUDDLULUULRRRDRLULDDRLUDRDURLUULDUDDDDDUDDDDLDUDRDRRLRLRLURDURRURDLURDURRUUULULLUURDLURDUURRDLDLDDUURDDURLDDDRUURLDURRURULURLRRLUDDUDDDLLULUDUUUDRULLLLULLRDDRDLRDRRDRRDLDLDDUURRRDDULRUUURUDRDDLRLRLRRDLDRDLLDRRDLLUULUDLLUDUUDRDLURRRRULDRDRUDULRLLLLRRULDLDUUUURLDULDDLLDDRLLURLUDULURRRUULURDRUDLRLLLRDDLULLDRURDDLLDUDRUDRLRRLULLDRRDULDLRDDRDUURDRRRLRDLDUDDDLLUDURRUUULLDRLUDLDRRRRDDDLLRRDUURURLRURRDUDUURRDRRUDRLURLUDDDLUDUDRDRURRDDDDRDLRUDRDRLLDULRURULULDRLRLRRLDURRRUL";
	//var initInput = "ULL\nRRDDD\nLURDL\nUUUUD"; // Part 1/2 Sample Input
	var input = "";
	var output = "";

	function parseInput() {
	  input = document.getElementById("puzzleinput").value.split("\n");
	}

	// Variables
	var isPart2 = window.location.href.includes("?2");
	var frequency = [];
	var pos = [];
	var grid = [];

	function intiValues() {
	  output = "";
	  frequency = [];
	  if (isPart2) {
	    grid = [
	      [null, null, "1", null, null],
	      [null, "2", "3", "4", null],
	      ["5", "6", "7", "8", "9"],
	      [null, "A", "B", "C", null],
	      [null, null, "D", null, null]
	    ];
	    pos = [2, 0];
	  } else {
	    pos = [1, 1];
	    grid = [
	      ["1", "2", "3"],
	      ["4", "5", "6"],
	      ["7", "8", "9"]
	    ];
	  }
	}

	function updateFreq(x) {
	  frequency[x] ? frequency[x]++ : frequency[x] = 1;
	}

	function printGrid() {
	  var max = 0;
	  var min = Number.MAX_SAFE_INTEGER;
	  for (freq in frequency) {
	    if (max < frequency[freq]) {
	      max = frequency[freq];
	    }
	    if (min > frequency[freq]) {
	      min = frequency[freq];
	    }
	  }
	  if (min > max * .1) {
	    min -= max * .1;
	  }
	  max -= min;

	  var gridOut = "<table id='keypad'>";
	  for (var i = 0; i < grid.length; i++) {
	    gridOut += "<tr>";
	    for (var j = 0; j < grid[i].length; j++) {
	      var item = grid[i][j];
	      if (item != null) {
	        gridOut += "<td style='background:rgba(255,0,0," + ((frequency[item] - min) / max) + ");''>" + grid[i][j] + "</td>";
	      } else {
	        gridOut += "<td></td>";
	      }
	    }
	    gridOut += "</tr>";
	  }
	  gridOut += "</table>";

	  print(gridOut);
	}

	function makeMove(x) {
	  switch (x.toUpperCase()) {
	    case "U":
	      if (pos[0] > 0 && grid[pos[0] - 1][pos[1]] != null) {
	        pos[0]--;
	      }
	      break;
	    case "D":
	      if (pos[0] < grid.length - 1 && grid[pos[0] + 1][pos[1]] != null) {
	        pos[0]++;
	      }
	      break;
	    case "L":
	      if (pos[1] > 0 && grid[pos[0]][pos[1] - 1] != null) {
	        pos[1]--;
	      }
	      break;
	    case "R":
	      if (pos[1] < grid[pos[0]].length - 1 && grid[pos[0]][pos[1] + 1] != null) {
	        pos[1]++;
	      }
	      break;
	  }
	}

	function main() {
	  // Initialize
	  clear();
	  intiValues();
	  parseInput()

	  // Logic
	  for (move of input) {
	    for (var i = 0; i < move.length; i++) {
	      makeMove(move.charAt(i));
	      updateFreq(grid[pos[0]][pos[1]]);
	      //print(move.charAt(i) + "-" + pos);
	    }
	    output += grid[pos[0]][pos[1]];
	    //print(move);
	  }
	  print(output);
	  printGrid();
	}

</script>
<style type="text/css">
body {
	background-color: #CCCCCC;
}

#keypad {
	font-size: 2em;
	border: 0px;
	padding: 0px;
	text-align: center;
}

#input, #puzzleinput {
	width: 100%;
}

#puzzleinput {
	white-space: nowrap;
}
</style>
</head>
<body onload="setInitInput();">
	<div id="input">
		<textarea id="puzzleinput" cols="" rows="5"></textarea>
		<br />
		<form action="">
			<input id="part1" type="radio" name="part" value="1"
				onchange="setPart(this);" checked="checked" />Part 1 <input
				id="part2" type="radio" name="part" value="2"
				onchange="setPart(this);" />Part 2 <input type="button"
				value="SOLVE" onclick="main();">
		</form>
	</div>
	<div id="main"></div>
</body>
</html>
